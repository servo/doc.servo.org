<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Internal representation of clips in WebRender."><meta name="keywords" content="rust, rustlang, rust-lang, clip"><title>webrender::clip - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../../dark.css" disabled><link rel="stylesheet" type="text/css" href="../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../storage.js"></script><script src="../../crates.js"></script><script defer src="../../main.js"></script>
    <noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../favicon.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../webrender/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"></h2>
    </nav>
    <nav class="sidebar"><a class="sidebar-logo" href="../../webrender/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"><a href="#">Module clip</a></h2><div class="sidebar-elems"><div class="block items"><ul><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#functions">Functions</a></li><li><a href="#types">Type Definitions</a></li></ul></div><div id="sidebar-vars" data-name="clip" data-ty="mod" data-relpath="./"></div><script defer src="./sidebar-items.js"></script></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../../webrender/index.html"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></a><nav class="sub"><div class="theme-picker hidden"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../../brush.svg"></button><div id="theme-choices" role="menu"></div></div><form class="search-form"><div class="search-container"><div>
                                <input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../../wheel.svg"></a></div></form></nav></div><section id="main-content" class="content"><div class="main-heading">
    <h1 class="fqn"><span class="in-band">Module <a href="../index.html">webrender</a>::<wbr><a class="mod" href="#">clip</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../../src/webrender/clip.rs.html#5-1953" title="goto source code">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Internal representation of clips in WebRender.</p>
<h2 id="data-structures" class="section-header"><a href="#data-structures">Data structures</a></h2>
<p>There are a number of data structures involved in the clip module:</p>
<ul>
<li>
<p>ClipStore - Main interface used by other modules.</p>
</li>
<li>
<p>ClipItem - A single clip item (e.g. a rounded rect, or a box shadow).
These are an exposed API type, stored inline in a ClipNode.</p>
</li>
<li>
<p>ClipNode - A ClipItem with an attached GPU handle. The GPU handle is populated
when a ClipNodeInstance is built from this node (which happens while
preparing primitives for render).</p>
</li>
</ul>
<p>ClipNodeInstance - A ClipNode with attached positioning information (a spatial
node index). This is stored as a contiguous array of nodes
within the ClipStore.</p>
<div class="example-wrap"><pre class="language-ascii"><code>+-----------------------+-----------------------+-----------------------+
| ClipNodeInstance      | ClipNodeInstance      | ClipNodeInstance      |
+-----------------------+-----------------------+-----------------------+
| ClipItem              | ClipItem              | ClipItem              |
| Spatial Node Index    | Spatial Node Index    | Spatial Node Index    |
| GPU cache handle      | GPU cache handle      | GPU cache handle      |
| ...                   | ...                   | ...                   |
+-----------------------+-----------------------+-----------------------+
           0                        1                       2
   +----------------+    |                                              |
   | ClipNodeRange  |____|                                              |
   |    index: 1    |                                                   |
   |    count: 2    |___________________________________________________|
   +----------------+</code></pre></div>
<ul>
<li>
<p>ClipNodeRange - A clip item range identifies a range of clip nodes instances.
It is stored as an (index, count).</p>
</li>
<li>
<p>ClipChainNode - A clip chain node contains a handle to an interned clip item,
positioning information (from where the clip was defined), and
an optional parent link to another ClipChainNode. ClipChainId
is an index into an array, or ClipChainId::NONE for no parent.</p>
</li>
</ul>
<div class="example-wrap"><pre class="language-ascii"><code>+----------------+    ____+----------------+    ____+----------------+   /---&gt; ClipChainId::NONE
| ClipChainNode  |   |    | ClipChainNode  |   |    | ClipChainNode  |   |
+----------------+   |    +----------------+   |    +----------------+   |
| ClipDataHandle |   |    | ClipDataHandle |   |    | ClipDataHandle |   |
| Spatial index  |   |    | Spatial index  |   |    | Spatial index  |   |
| Parent Id      |___|    | Parent Id      |___|    | Parent Id      |___|
| ...            |        | ...            |        | ...            |
+----------------+        +----------------+        +----------------+</code></pre></div>
<ul>
<li>
<p>ClipChainInstance - A ClipChain that has been built for a specific primitive + positioning node.</p>
<p>When given a clip chain ID, and a local primitive rect and its spatial node, the clip module
creates a clip chain instance. This is a struct with various pieces of useful information
(such as a local clip rect). It also contains a (index, count)
range specifier into an index buffer of the ClipNodeInstance structures that are actually relevant
for this clip chain instance. The index buffer structure allows a single array to be used for
all of the clip-chain instances built in a single frame. Each entry in the index buffer
also stores some flags relevant to the clip node in this positioning context.</p>
</li>
</ul>
<div class="example-wrap"><pre class="language-ascii"><code>+----------------------+
| ClipChainInstance    |
+----------------------+
| ...                  |
| local_clip_rect      |________________________________________________________________________
| clips_range          |_______________                                                        |
+----------------------+              |                                                        |
                                      |                                                        |
+------------------+------------------+------------------+------------------+------------------+
| ClipNodeInstance | ClipNodeInstance | ClipNodeInstance | ClipNodeInstance | ClipNodeInstance |
+------------------+------------------+------------------+------------------+------------------+
| flags            | flags            | flags            | flags            | flags            |
| ...              | ...              | ...              | ...              | ...              |
+------------------+------------------+------------------+------------------+------------------+</code></pre></div><h2 id="rendering-clipped-primitives" class="section-header"><a href="#rendering-clipped-primitives">Rendering clipped primitives</a></h2>
<p>See the <a href="../segment/index.html"><code>segment</code> module documentation</a>.</p>
</div></details><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ClipChainBuilder.html" title="webrender::clip::ClipChainBuilder struct">ClipChainBuilder</a></div><div class="item-right docblock-short"><p>A helper used during scene building to construct (internal) clip chains from
the public API definitions (a hierarchy of ClipIds)</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ClipChainId.html" title="webrender::clip::ClipChainId struct">ClipChainId</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ClipChainInstance.html" title="webrender::clip::ClipChainInstance struct">ClipChainInstance</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ClipChainLevel.html" title="webrender::clip::ClipChainLevel struct">ClipChainLevel</a></div><div class="item-right docblock-short"><p>Maintains a (flattened) list of clips for a given level in the surface level stack.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ClipChainNode.html" title="webrender::clip::ClipChainNode struct">ClipChainNode</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ClipChainStack.html" title="webrender::clip::ClipChainStack struct">ClipChainStack</a></div><div class="item-right docblock-short"><p>Maintains a stack of clip chain ids that are currently active,
when a clip exists on a picture that has no surface, and is passed
on down to the child primitive(s).</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ClipInstance.html" title="webrender::clip::ClipInstance struct">ClipInstance</a></div><div class="item-right docblock-short"><p>Defines a clip that is positioned by a specific spatial node</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ClipInternData.html" title="webrender::clip::ClipInternData struct">ClipInternData</a></div><div class="item-right docblock-short"><p>The data available about an interned clip node during scene building</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ClipItem.html" title="webrender::clip::ClipItem struct">ClipItem</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ClipItemKey.html" title="webrender::clip::ClipItemKey struct">ClipItemKey</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ClipNode.html" title="webrender::clip::ClipNode struct">ClipNode</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ClipNodeFlags.html" title="webrender::clip::ClipNodeFlags struct">ClipNodeFlags</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ClipNodeInfo.html" title="webrender::clip::ClipNodeInfo struct">ClipNodeInfo</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ClipNodeInstance.html" title="webrender::clip::ClipNodeInstance struct">ClipNodeInstance</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ClipNodeRange.html" title="webrender::clip::ClipNodeRange struct">ClipNodeRange</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ClipRegion.html" title="webrender::clip::ClipRegion struct">ClipRegion</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ClipStore.html" title="webrender::clip::ClipStore struct">ClipStore</a></div><div class="item-right docblock-short"><p>The main clipping public interface that other modules access.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ClipTemplate.html" title="webrender::clip::ClipTemplate struct">ClipTemplate</a></div><div class="item-right docblock-short"><p>A clip template defines clips in terms of the public API. Specifically,
this is a parent <code>ClipId</code> and some number of clip instances. See the
CLIPPING_AND_POSITIONING.md document in doc/ for more information.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ComplexTranslateIter.html" title="webrender::clip::ComplexTranslateIter struct">ComplexTranslateIter</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Geometry.html" title="webrender::clip::Geometry struct">Geometry</a></div><div class="item-right docblock-short"><p>Represents a local rect and a device space
rectangles that are either outside or inside bounds.</p>
</div></div></div><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.ClipItemKeyKind.html" title="webrender::clip::ClipItemKeyKind enum">ClipItemKeyKind</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.ClipItemKind.html" title="webrender::clip::ClipItemKind enum">ClipItemKind</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.ClipNodeKind.html" title="webrender::clip::ClipNodeKind enum">ClipNodeKind</a></div><div class="item-right docblock-short"><p>Helper to identify simple clips (normal rects) from other kinds of clips,
which can often be handled via fast code paths.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.ClipResult.html" title="webrender::clip::ClipResult enum">ClipResult</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.ClipSpaceConversion.html" title="webrender::clip::ClipSpaceConversion enum">ClipSpaceConversion</a></div><div class="item-right docblock-short"><p>A helper struct for converting between coordinate systems
of clip sources and primitives.</p>
</div></div></div><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.add_clip_node_to_current_chain.html" title="webrender::clip::add_clip_node_to_current_chain fn">add_clip_node_to_current_chain</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.compute_box_shadow_parameters.html" title="webrender::clip::compute_box_shadow_parameters fn">compute_box_shadow_parameters</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.projected_rect_contains.html" title="webrender::clip::projected_rect_contains fn">projected_rect_contains</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.rounded_rectangle_contains_point.html" title="webrender::clip::rounded_rectangle_contains_point fn">rounded_rectangle_contains_point</a></div><div class="item-right docblock-short"></div></div></div><h2 id="types" class="small-section-header"><a href="#types">Type Definitions</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="type" href="type.ClipDataHandle.html" title="webrender::clip::ClipDataHandle type">ClipDataHandle</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="type" href="type.ClipDataStore.html" title="webrender::clip::ClipDataStore type">ClipDataStore</a></div><div class="item-right docblock-short"></div></div></div></section><section id="search" class="content hidden"></section></div></main><div id="rustdoc-vars" data-root-path="../../" data-current-crate="webrender" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.60.0-nightly (5e57faa78 2022-01-19)" ></div>
</body></html>