<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Smart pointers for the JS-managed DOM objects."><title>script::dom::bindings::root - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../../static.files/rustdoc-dd39b87e5fcfba68.css"><meta name="rustdoc-vars" data-root-path="../../../../" data-static-root-path="../../../../static.files/" data-current-crate="script" data-themes="" data-resource-suffix="" data-rustdoc-version="1.80.1 (3f5fd8dd4 2024-08-06)" data-channel="1.80.1" data-search-js="search-d52510db62a78183.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../../../static.files/storage-118b08c4c78b968e.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../../../static.files/main-20a3ad099b048cf2.js"></script><noscript><link rel="stylesheet" href="../../../../static.files/noscript-df360f571f6edeae.css"></noscript><link rel="alternate icon" type="image/png" href="../../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../../script/index.html">script</a><span class="version">0.0.1</span></h2></div><h2 class="location"><a href="#">Module root</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#structs">Structs</a></li><li><a href="#constants">Constants</a></li><li><a href="#traits">Traits</a></li><li><a href="#functions">Functions</a></li><li><a href="#types">Type Aliases</a></li></ul></section><h2><a href="../index.html">In script::dom::bindings</a></h2></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../../../index.html">script</a>::<wbr><a href="../../index.html">dom</a>::<wbr><a href="../index.html">bindings</a>::<wbr><a class="mod" href="#">root</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../../../../src/script/dom/bindings/root.rs.html#5-780">source</a> Â· <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Smart pointers for the JS-managed DOM objects.</p>
<p>The DOM is made up of DOM objects whose lifetime is entirely controlled by
the whims of the SpiderMonkey garbage collector. The types in this module
are designed to ensure that any interactions with said Rust types only
occur on values that will remain alive the entire time.</p>
<p>Here is a brief overview of the important types:</p>
<ul>
<li><code>Root&lt;T&gt;</code>: a stack-based rooted value.</li>
<li><code>DomRoot&lt;T&gt;</code>: a stack-based reference to a rooted DOM object.</li>
<li><code>Dom&lt;T&gt;</code>: a reference to a DOM object that can automatically be traced by
the GC when encountered as a field of a Rust structure.</li>
</ul>
<p><code>Dom&lt;T&gt;</code> does not allow access to their inner value without explicitly
creating a stack-based root via the <code>root</code> method. This returns a <code>DomRoot&lt;T&gt;</code>,
which causes the JS-owned value to be uncollectable for the duration of the
<code>Root</code> objectâ€™s lifetime. A reference to the object can then be obtained
from the <code>Root</code> object. These references are not allowed to outlive their
originating <code>DomRoot&lt;T&gt;</code>.</p>
</div></details><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">Â§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.Dom.html" title="struct script::dom::bindings::root::Dom">Dom</a></div><div class="desc docblock-short">A traced reference to a DOM object</div></li><li><div class="item-name"><a class="struct" href="struct.DomOnceCell.html" title="struct script::dom::bindings::root::DomOnceCell">DomOnceCell</a></div><div class="desc docblock-short">A holder that allows to lazily initialize the value only once
<code>Dom&lt;T&gt;</code>, using OnceCell
Essentially a <code>OnceCell&lt;Dom&lt;T&gt;&gt;</code>.</div></li><li><div class="item-name"><a class="struct" href="struct.LayoutDom.html" title="struct script::dom::bindings::root::LayoutDom">LayoutDom</a></div><div class="desc docblock-short">An unrooted reference to a DOM object for use in layout. <code>Layout*Helpers</code>
traits must be implemented on this.</div></li><li><div class="item-name"><a class="struct" href="struct.MaybeUnreflectedDom.html" title="struct script::dom::bindings::root::MaybeUnreflectedDom">MaybeUnreflectedDom</a></div><div class="desc docblock-short">A traced reference to a DOM object that may not be reflected yet.</div></li><li><div class="item-name"><a class="struct" href="struct.MutDom.html" title="struct script::dom::bindings::root::MutDom">MutDom</a></div><div class="desc docblock-short">A holder that provides interior mutability for GC-managed values such as
<code>Dom&lt;T&gt;</code>.  Essentially a <code>Cell&lt;Dom&lt;T&gt;&gt;</code>, but safer.</div></li><li><div class="item-name"><a class="struct" href="struct.MutNullableDom.html" title="struct script::dom::bindings::root::MutNullableDom">MutNullableDom</a></div><div class="desc docblock-short">A holder that provides interior mutability for GC-managed values such as
<code>Dom&lt;T&gt;</code>, with nullability represented by an enclosing Option wrapper.
Essentially a <code>Cell&lt;Option&lt;Dom&lt;T&gt;&gt;&gt;</code>, but safer.</div></li><li><div class="item-name"><a class="struct" href="struct.Root.html" title="struct script::dom::bindings::root::Root">Root</a></div><div class="desc docblock-short">A rooted value.</div></li><li><div class="item-name"><a class="struct" href="struct.RootCollection.html" title="struct script::dom::bindings::root::RootCollection">RootCollection</a></div><div class="desc docblock-short">A rooting mechanism for reflectors on the stack.
LIFO is not required.</div></li><li><div class="item-name"><a class="struct" href="struct.ThreadLocalStackRoots.html" title="struct script::dom::bindings::root::ThreadLocalStackRoots">ThreadLocalStackRoots</a></div></li></ul><h2 id="constants" class="section-header">Constants<a href="#constants" class="anchor">Â§</a></h2><ul class="item-table"><li><div class="item-name"><a class="constant" href="constant.STACK_ROOTS.html" title="constant script::dom::bindings::root::STACK_ROOTS">STACK_ROOTS</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></li></ul><h2 id="traits" class="section-header">Traits<a href="#traits" class="anchor">Â§</a></h2><ul class="item-table"><li><div class="item-name"><a class="trait" href="trait.DomSlice.html" title="trait script::dom::bindings::root::DomSlice">DomSlice</a></div><div class="desc docblock-short">Get a slice of references to DOM objects.</div></li><li><div class="item-name"><a class="trait" href="trait.StableTraceObject.html" title="trait script::dom::bindings::root::StableTraceObject">StableTraceObject</a></div><div class="desc docblock-short"><code>StableTraceObject</code> represents values that can be rooted through a stable address that will
not change for their whole lifetime.
It is an unsafe trait that requires implementors to ensure certain safety guarantees.</div></li></ul><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">Â§</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.assert_in_layout.html" title="fn script::dom::bindings::root::assert_in_layout">assert_in_layout</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></li><li><div class="item-name"><a class="fn" href="fn.assert_in_script.html" title="fn script::dom::bindings::root::assert_in_script">assert_in_script</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></li><li><div class="item-name"><a class="fn" href="fn.trace_roots.html" title="fn script::dom::bindings::root::trace_roots">trace_roots</a><sup title="unsafe function">âš </sup></div><div class="desc docblock-short">SM Callback that traces the rooted reflectors</div></li></ul><h2 id="types" class="section-header">Type Aliases<a href="#types" class="anchor">Â§</a></h2><ul class="item-table"><li><div class="item-name"><a class="type" href="type.DomRoot.html" title="type script::dom::bindings::root::DomRoot">DomRoot</a></div><div class="desc docblock-short">A rooted reference to a DOM object.</div></li></ul></section></div></main></body></html>