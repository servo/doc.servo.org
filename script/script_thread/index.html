<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="The script thread is the thread that owns the DOM in memory, runs JavaScript, and spawns parsing and layout threads. It’s in charge of processing events for all same-origin pages in a frame tree, and manages the entire lifetime of pages in the frame tree from initial request to teardown."><meta name="keywords" content="rust, rustlang, rust-lang, script_thread"><title>script::script_thread - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../../dark.css" disabled><link rel="stylesheet" type="text/css" href="../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../storage.js"></script><script src="../../crates.js"></script><script defer src="../../main.js"></script>
    <noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../favicon.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../script/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"></h2>
    </nav>
    <nav class="sidebar"><a class="sidebar-logo" href="../../script/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"><a href="#">Module script_thread</a></h2><div class="sidebar-elems"><div class="block items"><ul><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#constants">Constants</a></li><li><a href="#functions">Functions</a></li><li><a href="#types">Type Definitions</a></li></ul></div><div id="sidebar-vars" data-name="script_thread" data-ty="mod" data-relpath="./"></div><script defer src="./sidebar-items.js"></script></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../../script/index.html"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></a><nav class="sub"><div class="theme-picker hidden"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../../brush.svg"></button><div id="theme-choices" role="menu"></div></div><form class="search-form"><div class="search-container"><div>
                                <input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../../wheel.svg"></a></div></form></nav></div><section id="main-content" class="content"><div class="main-heading">
    <h1 class="fqn"><span class="in-band">Module <a href="../index.html">script</a>::<wbr><a class="mod" href="#">script_thread</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../../src/script/script_thread.rs.html#5-4035" title="goto source code">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>The script thread is the thread that owns the DOM in memory, runs JavaScript, and spawns parsing
and layout threads. It’s in charge of processing events for all same-origin pages in a frame
tree, and manages the entire lifetime of pages in the frame tree from initial request to
teardown.</p>
<p>Page loads follow a two-step process. When a request for a new page load is received, the
network request is initiated and the relevant data pertaining to the new page is stashed.
While the non-blocking request is ongoing, the script thread is free to process further events,
noting when they pertain to ongoing loads (such as resizes/viewport adjustments). When the
initial response is received for an ongoing load, the second phase starts - the frame tree
entry is created, along with the Window and Document objects, and the appropriate parser
takes over the response body. Once parsing is complete, the document lifecycle for loading
a page runs its course and the script thread returns to processing events in the main event
loop.</p>
</div></details><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.BHMExitSignal.html" title="script::script_thread::BHMExitSignal struct">BHMExitSignal</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Documents.html" title="script::script_thread::Documents struct">Documents</a></div><div class="item-right docblock-short"><p>The set of all documents managed by this script thread.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.DocumentsIter.html" title="script::script_thread::DocumentsIter struct">DocumentsIter</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.InProgressLoad.html" title="script::script_thread::InProgressLoad struct">InProgressLoad</a></div><div class="item-right docblock-short"><p>A document load that is in the process of fetching the requested resource. Contains
data that will need to be present when the document and frame tree entry are created,
but is only easily available at initiation of the load and on a push basis (so some
data will be updated according to future resize events, viewport changes, etc.)</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.IncompleteParserContexts.html" title="script::script_thread::IncompleteParserContexts struct">IncompleteParserContexts</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.MainThreadScriptChan.html" title="script::script_thread::MainThreadScriptChan struct">MainThreadScriptChan</a></div><div class="item-right docblock-short"><p>Encapsulates internal communication of main thread messages within the script thread.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ScriptMemoryFailsafe.html" title="script::script_thread::ScriptMemoryFailsafe struct">ScriptMemoryFailsafe</a></div><div class="item-right docblock-short"><p>In the event of thread panic, all data on the stack runs its destructor. However, there
are no reachable, owning pointers to the DOM memory, so it never gets freed by default
when the script thread fails. The ScriptMemoryFailsafe uses the destructor bomb pattern
to forcibly tear down the JS realms for pages associated with the failing ScriptThread.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ScriptThread.html" title="script::script_thread::ScriptThread struct">ScriptThread</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.SendableMainThreadScriptChan.html" title="script::script_thread::SendableMainThreadScriptChan struct">SendableMainThreadScriptChan</a></div><div class="item-right docblock-short"><p>Encapsulates internal communication of shared messages within the script thread.</p>
</div></div></div><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.MainThreadScriptMsg.html" title="script::script_thread::MainThreadScriptMsg enum">MainThreadScriptMsg</a></div><div class="item-right docblock-short"><p>Messages used to control the script event loop.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.MixedMessage.html" title="script::script_thread::MixedMessage enum">MixedMessage</a></div><div class="item-right docblock-short"></div></div></div><h2 id="constants" class="small-section-header"><a href="#constants">Constants</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="constant" href="constant.SCRIPT_THREAD_ROOT.html" title="script::script_thread::SCRIPT_THREAD_ROOT constant">SCRIPT_THREAD_ROOT</a></div><div class="item-right docblock-short"></div></div></div><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.dom_last_modified.html" title="script::script_thread::dom_last_modified fn">dom_last_modified</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.interrupt_callback.html" title="script::script_thread::interrupt_callback fn">interrupt_callback</a><a title="unsafe function" href="#"><sup>⚠</sup></a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.trace_thread.html" title="script::script_thread::trace_thread fn">trace_thread</a><a title="unsafe function" href="#"><sup>⚠</sup></a></div><div class="item-right docblock-short"></div></div></div><h2 id="types" class="small-section-header"><a href="#types">Type Definitions</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="type" href="type.ImageCacheMsg.html" title="script::script_thread::ImageCacheMsg type">ImageCacheMsg</a></div><div class="item-right docblock-short"></div></div></div></section><section id="search" class="content hidden"></section></div></main><div id="rustdoc-vars" data-root-path="../../" data-current-crate="script" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.60.0-nightly (5e57faa78 2022-01-19)" ></div>
</body></html>