<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `inner` mod in crate `regex_automata`."><title>regex_automata::util::pool::inner - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../../static.files/rustdoc-dd39b87e5fcfba68.css"><meta name="rustdoc-vars" data-root-path="../../../../" data-static-root-path="../../../../static.files/" data-current-crate="regex_automata" data-themes="" data-resource-suffix="" data-rustdoc-version="1.80.1 (3f5fd8dd4 2024-08-06)" data-channel="1.80.1" data-search-js="search-d52510db62a78183.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../../../static.files/storage-118b08c4c78b968e.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../../../static.files/main-20a3ad099b048cf2.js"></script><noscript><link rel="stylesheet" href="../../../../static.files/noscript-df360f571f6edeae.css"></noscript><link rel="alternate icon" type="image/png" href="../../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../../regex_automata/index.html">regex_automata</a><span class="version">0.4.8</span></h2></div><h2 class="location"><a href="#">Module inner</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#structs">Structs</a></li><li><a href="#constants">Constants</a></li><li><a href="#statics">Statics</a></li></ul></section><h2><a href="../index.html">In regex_automata::util::pool</a></h2></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../../../index.html">regex_automata</a>::<wbr><a href="../../index.html">util</a>::<wbr><a href="../index.html">pool</a>::<wbr><a class="mod" href="#">inner</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../../../../src/regex_automata/util/pool.rs.html#235">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.CacheLine.html" title="struct regex_automata::util::pool::inner::CacheLine">CacheLine</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="desc docblock-short">This puts each stack in the pool below into its own cache line. This is
an absolutely critical optimization that tends to have the most impact
in high contention workloads. Without forcing each mutex protected
into its own cache line, high contention exacerbates the performance
problem by causing “false sharing.” By putting each mutex in its own
cache-line, we avoid the false sharing problem and the affects of
contention are greatly reduced.</div></li><li><div class="item-name"><a class="struct" href="struct.Pool.html" title="struct regex_automata::util::pool::inner::Pool">Pool</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="desc docblock-short">A thread safe pool utilizing std-only features.</div></li><li><div class="item-name"><a class="struct" href="struct.PoolGuard.html" title="struct regex_automata::util::pool::inner::PoolGuard">PoolGuard</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="desc docblock-short">A guard that is returned when a caller requests a value from the pool.</div></li></ul><h2 id="constants" class="section-header">Constants<a href="#constants" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="constant" href="constant.MAX_POOL_STACKS.html" title="constant regex_automata::util::pool::inner::MAX_POOL_STACKS">MAX_POOL_STACKS</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="desc docblock-short">The number of stacks we use inside of the pool. These are only used for
non-owners. That is, these represent the “slow” path.</div></li><li><div class="item-name"><a class="constant" href="constant.THREAD_ID.html" title="constant regex_automata::util::pool::inner::THREAD_ID">THREAD_ID</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="desc docblock-short">A thread local used to assign an ID to a thread.</div></li></ul><h2 id="statics" class="section-header">Statics<a href="#statics" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="static" href="static.COUNTER.html" title="static regex_automata::util::pool::inner::COUNTER">COUNTER</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="desc docblock-short">An atomic counter used to allocate thread IDs.</div></li><li><div class="item-name"><a class="static" href="static.THREAD_ID_DROPPED.html" title="static regex_automata::util::pool::inner::THREAD_ID_DROPPED">THREAD_ID_DROPPED</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="desc docblock-short">This sentinel is used to indicate that a guard has already been dropped
and should not be re-dropped. We use this because our drop code can be
called outside of Drop and thus there could be a bug in the internal
implementation that results in trying to put the same guard back into
the same pool multiple times, and <em>that</em> could result in UB if we
didn’t mark the guard as already having been put back in the pool.</div></li><li><div class="item-name"><a class="static" href="static.THREAD_ID_INUSE.html" title="static regex_automata::util::pool::inner::THREAD_ID_INUSE">THREAD_ID_INUSE</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="desc docblock-short">A thread ID indicating that the special owner value is in use and not
available. This state is useful for avoiding a case where the owner
of a pool calls <code>get</code> before putting the result of a previous <code>get</code>
call back into the pool.</div></li><li><div class="item-name"><a class="static" href="static.THREAD_ID_UNOWNED.html" title="static regex_automata::util::pool::inner::THREAD_ID_UNOWNED">THREAD_ID_UNOWNED</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="desc docblock-short">A thread ID indicating that there is no owner. This is the initial
state of a pool. Once a pool has an owner, there is no way to change
it.</div></li></ul></section></div></main></body></html>