<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A multi-producer, single-consumer queue for sending values across asynchronous tasks."><title>futures_channel::mpsc - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-dd39b87e5fcfba68.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="futures_channel" data-themes="" data-resource-suffix="" data-rustdoc-version="1.80.1 (3f5fd8dd4 2024-08-06)" data-channel="1.80.1" data-search-js="search-d52510db62a78183.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../static.files/storage-118b08c4c78b968e.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../static.files/main-20a3ad099b048cf2.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-df360f571f6edeae.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../futures_channel/index.html">futures_channel</a><span class="version">0.3.31</span></h2></div><h2 class="location"><a href="#">Module mpsc</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#constants">Constants</a></li><li><a href="#traits">Traits</a></li><li><a href="#functions">Functions</a></li></ul></section><h2><a href="../index.html">In crate futures_channel</a></h2></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../index.html">futures_channel</a>::<wbr><a class="mod" href="#">mpsc</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../../src/futures_channel/mpsc/mod.rs.html#1-1373">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>A multi-producer, single-consumer queue for sending values across
asynchronous tasks.</p>
<p>Similarly to the <code>std</code>, channel creation provides <a href="struct.Receiver.html"><code>Receiver</code></a> and
<a href="struct.Sender.html"><code>Sender</code></a> handles. <a href="struct.Receiver.html"><code>Receiver</code></a> implements <a href="../../futures_core/stream/trait.Stream.html"><code>Stream</code></a> and allows a task to
read values out of the channel. If there is no message to read from the
channel, the current task will be notified when a new value is sent.
<a href="struct.Sender.html"><code>Sender</code></a> implements the <code>Sink</code> trait and allows a task to send messages into
the channel. If the channel is at capacity, the send will be rejected and
the task will be notified when additional capacity is available. In other
words, the channel provides backpressure.</p>
<p>Unbounded channels are also available using the <code>unbounded</code> constructor.</p>
<h2 id="disconnection"><a class="doc-anchor" href="#disconnection">§</a>Disconnection</h2>
<p>When all <a href="struct.Sender.html"><code>Sender</code></a> handles have been dropped, it is no longer
possible to send values into the channel. This is considered the termination
event of the stream. As such, <a href="../../futures_core/stream/trait.Stream.html#tymethod.poll_next"><code>Receiver::poll_next</code></a>
will return <code>Ok(Ready(None))</code>.</p>
<p>If the <a href="struct.Receiver.html"><code>Receiver</code></a> handle is dropped, then messages can no longer
be read out of the channel. In this case, all further attempts to send will
result in an error.</p>
<h2 id="clean-shutdown"><a class="doc-anchor" href="#clean-shutdown">§</a>Clean Shutdown</h2>
<p>If the <a href="struct.Receiver.html"><code>Receiver</code></a> is simply dropped, then it is possible for
there to be messages still in the channel that will not be processed. As
such, it is usually desirable to perform a “clean” shutdown. To do this, the
receiver will first call <code>close</code>, which will prevent any further messages to
be sent into the channel. Then, the receiver consumes the channel to
completion, at which point the receiver can be dropped.</p>
</div></details><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="queue/index.html" title="mod futures_channel::mpsc::queue">queue</a><span title="Restricted Visibility">&nbsp;🔒</span> </div><div class="desc docblock-short">A mostly lock-free multi-producer, single consumer queue for sending
messages between asynchronous tasks.</div></li><li><div class="item-name"><a class="mod" href="sink_impl/index.html" title="mod futures_channel::mpsc::sink_impl">sink_impl</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li></ul><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.BoundedInner.html" title="struct futures_channel::mpsc::BoundedInner">BoundedInner</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="struct" href="struct.BoundedSenderInner.html" title="struct futures_channel::mpsc::BoundedSenderInner">BoundedSenderInner</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="struct" href="struct.Receiver.html" title="struct futures_channel::mpsc::Receiver">Receiver</a></div><div class="desc docblock-short">The receiving end of a bounded mpsc channel.</div></li><li><div class="item-name"><a class="struct" href="struct.SendError.html" title="struct futures_channel::mpsc::SendError">SendError</a></div><div class="desc docblock-short">The error type for <a href="struct.Sender.html" title="struct futures_channel::mpsc::Sender"><code>Sender</code>s</a> used as <code>Sink</code>s.</div></li><li><div class="item-name"><a class="struct" href="struct.Sender.html" title="struct futures_channel::mpsc::Sender">Sender</a></div><div class="desc docblock-short">The transmission end of a bounded mpsc channel.</div></li><li><div class="item-name"><a class="struct" href="struct.SenderTask.html" title="struct futures_channel::mpsc::SenderTask">SenderTask</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="struct" href="struct.State.html" title="struct futures_channel::mpsc::State">State</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="struct" href="struct.TryRecvError.html" title="struct futures_channel::mpsc::TryRecvError">TryRecvError</a></div><div class="desc docblock-short">The error type returned from <a href="struct.Receiver.html#method.try_next" title="method futures_channel::mpsc::Receiver::try_next"><code>try_next</code></a>.</div></li><li><div class="item-name"><a class="struct" href="struct.TrySendError.html" title="struct futures_channel::mpsc::TrySendError">TrySendError</a></div><div class="desc docblock-short">The error type returned from <a href="struct.Sender.html#method.try_send" title="method futures_channel::mpsc::Sender::try_send"><code>try_send</code></a>.</div></li><li><div class="item-name"><a class="struct" href="struct.UnboundedInner.html" title="struct futures_channel::mpsc::UnboundedInner">UnboundedInner</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="struct" href="struct.UnboundedReceiver.html" title="struct futures_channel::mpsc::UnboundedReceiver">UnboundedReceiver</a></div><div class="desc docblock-short">The receiving end of an unbounded mpsc channel.</div></li><li><div class="item-name"><a class="struct" href="struct.UnboundedSender.html" title="struct futures_channel::mpsc::UnboundedSender">UnboundedSender</a></div><div class="desc docblock-short">The transmission end of an unbounded mpsc channel.</div></li><li><div class="item-name"><a class="struct" href="struct.UnboundedSenderInner.html" title="struct futures_channel::mpsc::UnboundedSenderInner">UnboundedSenderInner</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li></ul><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.SendErrorKind.html" title="enum futures_channel::mpsc::SendErrorKind">SendErrorKind</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li></ul><h2 id="constants" class="section-header">Constants<a href="#constants" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="constant" href="constant.INIT_STATE.html" title="constant futures_channel::mpsc::INIT_STATE">INIT_STATE</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="constant" href="constant.MAX_BUFFER.html" title="constant futures_channel::mpsc::MAX_BUFFER">MAX_BUFFER</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="constant" href="constant.MAX_CAPACITY.html" title="constant futures_channel::mpsc::MAX_CAPACITY">MAX_CAPACITY</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="constant" href="constant.OPEN_MASK.html" title="constant futures_channel::mpsc::OPEN_MASK">OPEN_MASK</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li></ul><h2 id="traits" class="section-header">Traits<a href="#traits" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="trait" href="trait.AssertKinds.html" title="trait futures_channel::mpsc::AssertKinds">AssertKinds</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li></ul><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.channel.html" title="fn futures_channel::mpsc::channel">channel</a></div><div class="desc docblock-short">Creates a bounded mpsc channel for communicating between asynchronous tasks.</div></li><li><div class="item-name"><a class="fn" href="fn.decode_state.html" title="fn futures_channel::mpsc::decode_state">decode_state</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="fn" href="fn.encode_state.html" title="fn futures_channel::mpsc::encode_state">encode_state</a><span title="Restricted Visibility">&nbsp;🔒</span> </div></li><li><div class="item-name"><a class="fn" href="fn.unbounded.html" title="fn futures_channel::mpsc::unbounded">unbounded</a></div><div class="desc docblock-short">Creates an unbounded mpsc channel for communicating between asynchronous
tasks.</div></li></ul></section></div></main></body></html>