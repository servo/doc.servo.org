<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="HTML Tables (â•¯Â°â–¡Â°)â•¯ï¸µ â”»â”â”»"><title>layout_2020::table - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-dd39b87e5fcfba68.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="layout_2020" data-themes="" data-resource-suffix="" data-rustdoc-version="1.80.1 (3f5fd8dd4 2024-08-06)" data-channel="1.80.1" data-search-js="search-d52510db62a78183.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../static.files/storage-118b08c4c78b968e.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../static.files/main-20a3ad099b048cf2.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-df360f571f6edeae.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../layout_2020/index.html">layout_2020</a><span class="version">0.0.1</span></h2></div><h2 class="location"><a href="#">Module table</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#types">Type Aliases</a></li></ul></section><h2><a href="../index.html">In crate layout_2020</a></h2></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../index.html">layout_2020</a>::<wbr><a class="mod" href="#">table</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../../src/layout_2020/table/mod.rs.html#4-324">source</a> Â· <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="html-tables--"><a class="doc-anchor" href="#html-tables--">Â§</a>HTML Tables (â•¯Â°â–¡Â°)â•¯ï¸µ â”»â”â”»</h2>
<p>This implementation is based on the <a href="https://html.spec.whatwg.org/multipage/#tables">table section of the HTML 5 Specification</a>,
the draft <a href="https://drafts.csswg.org/css-tables">CSS Table Module Level! 3</a> and the <a href="https://source.chromium.org/chromium/chromium/src/third_party/+/main:blink/renderer/core/layout/table">LayoutNG implementation of tables</a> in Blink.
In general, the draft specification differs greatly from what other browsers do, so we
generally follow LayoutNG when in question.</p>
<p>Table layout is divided into two phases:</p>
<ol>
<li>Box Tree Construction</li>
<li>Fragment Tree Construction</li>
</ol>
<h3 id="box-tree-construction"><a class="doc-anchor" href="#box-tree-construction">Â§</a>Box Tree Construction</h3>
<p>During box tree construction, table layout (<code>construct.rs</code>) will traverse the DOM and construct
the basic box tree representation of a table, using the structs defined in this file (<a href="struct.Table.html" title="struct layout_2020::table::Table"><code>Table</code></a>,
<a href="struct.TableTrackGroup.html" title="struct layout_2020::table::TableTrackGroup"><code>TableTrackGroup</code></a>, <a href="struct.TableTrack.html" title="struct layout_2020::table::TableTrack"><code>TableTrack</code></a>, etc). When processing the DOM, elements are handled
differently depending on their <code>display</code> value. For instance, an element with <code>display: table-cell</code> is treated as a table cell. HTML table elements like <code>&lt;table&gt;</code> and <code>&lt;td&gt;</code> are
assigned the corresponding display value from the user agent stylesheet.</p>
<p>Every <a href="struct.Table.html" title="struct layout_2020::table::Table"><code>Table</code></a> holds an array of <a href="enum.TableSlot.html" title="enum layout_2020::table::TableSlot"><code>TableSlot</code></a>. A <a href="enum.TableSlot.html" title="enum layout_2020::table::TableSlot"><code>TableSlot</code></a> represents either a cell, a cell
location occupied by a cell originating from another place in the table, or is empty. In
addition, when there are table model errors, a slot may spanned by more than one cell.</p>
<p>During processing, the box tree construction agorithm will also fix up table structure, for
instance, creating anonymous rows for lone table cells and putting non-table content into
anonymous cells. In addition, flow layout will collect table elements outside of tables and create
anonymous tables for them.</p>
<p>After processing, box tree construction does a fix up pass on tables, converting rowspan=0 into
definite rowspan values and making sure that rowspan and celspan values are not larger than the
table itself. Finally, row groups may be reordered to enforce the fact that the first <code>&lt;thead&gt;</code>
comes before <code>&lt;tbody&gt;</code> which comes before the first <code>&lt;tfoot&gt;</code>.</p>
<h3 id="fragment-tree-construction"><a class="doc-anchor" href="#fragment-tree-construction">Â§</a>Fragment Tree Construction</h3>
<p>Fragment tree construction involves calculating the size and positioning of all table elements,
given their style, content, and cell and row spans. This happens both during intrinsic inline
size computation as well as layout into Fragments. In both of these cases, measurement and
layout is done by <a href="layout/struct.TableLayout.html" title="struct layout_2020::table::layout::TableLayout"><code>layout::TableLayout</code></a>, though for intrinsic size computation only a partial
layout is done.</p>
<p>In general, we follow the following steps when laying out table content:</p>
<ol>
<li>Compute track constrainedness and has originating cells</li>
<li>Compute cell measures</li>
<li>Compute column measures</li>
<li>Compute intrinsic inline sizes for columns and the table</li>
<li>Compute the final table inline size</li>
<li>Distribute size to columns</li>
<li>Do first pass cell layout</li>
<li>Do row layout</li>
<li>Compute table height and final row sizes</li>
<li>Create fragments for table elements (columns, column groups, rows, row groups, cells)</li>
</ol>
<p>For intrinsic size computation this process stops at step 4.</p>
</div></details><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">Â§</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="construct/index.html" title="mod layout_2020::table::construct">construct</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span> </div></li><li><div class="item-name"><a class="mod" href="layout/index.html" title="mod layout_2020::table::layout">layout</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span> </div></li></ul><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">Â§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.Table.html" title="struct layout_2020::table::Table">Table</a></div></li><li><div class="item-name"><a class="struct" href="struct.TableBuilder.html" title="struct layout_2020::table::TableBuilder">TableBuilder</a></div></li><li><div class="item-name"><a class="struct" href="struct.TableCaption.html" title="struct layout_2020::table::TableCaption">TableCaption</a></div></li><li><div class="item-name"><a class="struct" href="struct.TableSlotCell.html" title="struct layout_2020::table::TableSlotCell">TableSlotCell</a></div></li><li><div class="item-name"><a class="struct" href="struct.TableTrack.html" title="struct layout_2020::table::TableTrack">TableTrack</a></div><div class="desc docblock-short">A row or column of a table.</div></li><li><div class="item-name"><a class="struct" href="struct.TableTrackGroup.html" title="struct layout_2020::table::TableTrackGroup">TableTrackGroup</a></div></li></ul><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">Â§</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.TableSlot.html" title="enum layout_2020::table::TableSlot">TableSlot</a></div><div class="desc docblock-short">A single table slot. It may be an actual cell, or a reference
to a previous cell that is spanned here</div></li><li><div class="item-name"><a class="enum" href="enum.TableTrackGroupType.html" title="enum layout_2020::table::TableTrackGroupType">TableTrackGroupType</a></div></li></ul><h2 id="types" class="section-header">Type Aliases<a href="#types" class="anchor">Â§</a></h2><ul class="item-table"><li><div class="item-name"><a class="type" href="type.TableSize.html" title="type layout_2020::table::TableSize">TableSize</a></div></li><li><div class="item-name"><a class="type" href="type.TableSlotCoordinates.html" title="type layout_2020::table::TableSlotCoordinates">TableSlotCoordinates</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span> </div></li><li><div class="item-name"><a class="type" href="type.TableSlotOffset.html" title="type layout_2020::table::TableSlotOffset">TableSlotOffset</a></div></li></ul></section></div></main></body></html>