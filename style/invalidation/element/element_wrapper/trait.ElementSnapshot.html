<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="In order to compute restyle hints, we perform a selector match against a list of partial selectors whose rightmost simple selector may be sensitive to the thing being changed. We do this matching twice, once for the element as it exists now and once for the element as it existed at the time of the last restyle. If the results of the selector match differ, that means that the given partial selector is sensitive to the change, and we compute a restyle hint based on its combinator."><meta name="keywords" content="rust, rustlang, rust-lang, ElementSnapshot"><title>ElementSnapshot in style::invalidation::element::element_wrapper - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../../../../normalize.css"><link rel="stylesheet" type="text/css" href="../../../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../../../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../../../../dark.css" disabled><link rel="stylesheet" type="text/css" href="../../../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../../../storage.js"></script><script src="../../../../crates.js"></script><script defer src="../../../../main.js"></script>
    <noscript><link rel="stylesheet" href="../../../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../../../favicon.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../../../style/index.html"><div class="logo-container"><img class="rust-logo" src="../../../../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"></h2>
    </nav>
    <nav class="sidebar"><a class="sidebar-logo" href="../../../../style/index.html"><div class="logo-container"><img class="rust-logo" src="../../../../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"><a href="#">ElementSnapshot</a></h2><div class="sidebar-elems"><div class="block items"><h3 class="sidebar-title"><a href="#required-methods">Required Methods</a></h3><div class="sidebar-links"><a href="#tymethod.each_class">each_class</a><a href="#tymethod.has_attrs">has_attrs</a><a href="#tymethod.has_class">has_class</a><a href="#tymethod.id_attr">id_attr</a><a href="#tymethod.imported_part">imported_part</a><a href="#tymethod.is_part">is_part</a><a href="#tymethod.lang_attr">lang_attr</a><a href="#tymethod.state">state</a></div><h3 class="sidebar-title"><a href="#provided-methods">Provided Methods</a></h3><div class="sidebar-links"><a href="#method.debug_list_attributes">debug_list_attributes</a></div><h3 class="sidebar-title"><a href="#implementors">Implementors</a></h3></div><h2 class="location">In <a href="../../../index.html">style</a>::<wbr><a href="../../index.html">invalidation</a>::<wbr><a href="../index.html">element</a>::<wbr><a href="index.html">element_wrapper</a></h2><div id="sidebar-vars" data-name="ElementSnapshot" data-ty="trait" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../../../../style/index.html"><img class="rust-logo" src="../../../../rust-logo.svg" alt="logo"></a><nav class="sub"><div class="theme-picker hidden"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../../../../brush.svg"></button><div id="theme-choices" role="menu"></div></div><form class="search-form"><div class="search-container"><div>
                                <input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../../../../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../../../../wheel.svg"></a></div></form></nav></div><section id="main-content" class="content"><div class="main-heading">
    <h1 class="fqn"><span class="in-band">Trait <a href="../../../index.html">style</a>::<wbr><a href="../../index.html">invalidation</a>::<wbr><a href="../index.html">element</a>::<wbr><a href="index.html">element_wrapper</a>::<wbr><a class="trait" href="#">ElementSnapshot</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../../../../src/style/invalidation/element/element_wrapper.rs.html#40-77" title="goto source code">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><div class="docblock item-decl"><pre class="rust trait"><code>pub trait ElementSnapshot: <a class="trait" href="../../../../core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a> {
    fn <a href="#tymethod.state" class="fnname">state</a>(&amp;self) -&gt; <a class="enum" href="../../../../core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../../../element_state/struct.ElementState.html" title="struct style::element_state::ElementState">ElementState</a>&gt;;
<div class="item-spacer"></div>    fn <a href="#tymethod.has_attrs" class="fnname">has_attrs</a>(&amp;self) -&gt; <a class="primitive" href="../../../../std/primitive.bool.html">bool</a>;
<div class="item-spacer"></div>    fn <a href="#tymethod.id_attr" class="fnname">id_attr</a>(&amp;self) -&gt; <a class="enum" href="../../../../core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;<a class="type" href="../../../type.Atom.html" title="type style::Atom">WeakAtom</a>&gt;;
<div class="item-spacer"></div>    fn <a href="#tymethod.has_class" class="fnname">has_class</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name: &amp;<a class="type" href="../../../values/type.AtomIdent.html" title="type style::values::AtomIdent">AtomIdent</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case_sensitivity: <a class="enum" href="../../../../selectors/attr/enum.CaseSensitivity.html" title="enum selectors::attr::CaseSensitivity">CaseSensitivity</a><br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="primitive" href="../../../../std/primitive.bool.html">bool</a>;
<div class="item-spacer"></div>    fn <a href="#tymethod.is_part" class="fnname">is_part</a>(&amp;self, name: &amp;<a class="type" href="../../../values/type.AtomIdent.html" title="type style::values::AtomIdent">AtomIdent</a>) -&gt; <a class="primitive" href="../../../../std/primitive.bool.html">bool</a>;
<div class="item-spacer"></div>    fn <a href="#tymethod.imported_part" class="fnname">imported_part</a>(&amp;self, name: &amp;<a class="type" href="../../../values/type.AtomIdent.html" title="type style::values::AtomIdent">AtomIdent</a>) -&gt; <a class="enum" href="../../../../core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="type" href="../../../values/type.AtomIdent.html" title="type style::values::AtomIdent">AtomIdent</a>&gt;;
<div class="item-spacer"></div>    fn <a href="#tymethod.each_class" class="fnname">each_class</a>&lt;F&gt;(&amp;self, _: F)<br>&nbsp;&nbsp;&nbsp; <span class="where">where<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="../../../../core/ops/function/trait.FnMut.html" title="trait core::ops::function::FnMut">FnMut</a>(&amp;<a class="type" href="../../../values/type.AtomIdent.html" title="type style::values::AtomIdent">AtomIdent</a>)</span>;
<div class="item-spacer"></div>    fn <a href="#tymethod.lang_attr" class="fnname">lang_attr</a>(&amp;self) -&gt; <a class="enum" href="../../../../core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="type" href="../../../selector_parser/type.AttrValue.html" title="type style::selector_parser::AttrValue">AttrValue</a>&gt;;

    fn <a href="#method.debug_list_attributes" class="fnname">debug_list_attributes</a>(&amp;self) -&gt; <a class="struct" href="../../../../alloc/string/struct.String.html" title="struct alloc::string::String">String</a> { ... }
}</code></pre></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>In order to compute restyle hints, we perform a selector match against a
list of partial selectors whose rightmost simple selector may be sensitive
to the thing being changed. We do this matching twice, once for the element
as it exists now and once for the element as it existed at the time of the
last restyle. If the results of the selector match differ, that means that
the given partial selector is sensitive to the change, and we compute a
restyle hint based on its combinator.</p>
<p>In order to run selector matching against the old element state, we generate
a wrapper for the element which claims to have the old state. This is the
ElementWrapper logic below.</p>
<p>Gecko does this differently for element states, and passes a mask called
mStateMask, which indicates the states that need to be ignored during
selector matching. This saves an ElementWrapper allocation and an additional
selector match call at the expense of additional complexity inside the
selector matching logic. This only works for boolean states though, so we
still need to take the ElementWrapper approach for attribute-dependent
style. So we do it the same both ways for now to reduce complexity, but it’s
worth measuring the performance impact (if any) of the mStateMask approach.</p>
</div></details><h2 id="required-methods" class="small-section-header">Required methods<a href="#required-methods" class="anchor"></a></h2><div class="methods"><details class="rustdoc-toggle" open><summary><div id="tymethod.state" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../../../src/style/invalidation/element/element_wrapper.rs.html#42" title="goto source code">source</a></div><h4 class="code-header">fn <a href="#tymethod.state" class="fnname">state</a>(&amp;self) -&gt; <a class="enum" href="../../../../core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../../../element_state/struct.ElementState.html" title="struct style::element_state::ElementState">ElementState</a>&gt;</h4></div></summary><div class="docblock"><p>The state of the snapshot, if any.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.has_attrs" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../../../src/style/invalidation/element/element_wrapper.rs.html#45" title="goto source code">source</a></div><h4 class="code-header">fn <a href="#tymethod.has_attrs" class="fnname">has_attrs</a>(&amp;self) -&gt; <a class="primitive" href="../../../../std/primitive.bool.html">bool</a></h4></div></summary><div class="docblock"><p>If this snapshot contains attribute information.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.id_attr" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../../../src/style/invalidation/element/element_wrapper.rs.html#56" title="goto source code">source</a></div><h4 class="code-header">fn <a href="#tymethod.id_attr" class="fnname">id_attr</a>(&amp;self) -&gt; <a class="enum" href="../../../../core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;<a class="type" href="../../../type.Atom.html" title="type style::Atom">WeakAtom</a>&gt;</h4></div></summary><div class="docblock"><p>The ID attribute per this snapshot. Should only be called if
<code>has_attrs()</code> returns true.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.has_class" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../../../src/style/invalidation/element/element_wrapper.rs.html#60" title="goto source code">source</a></div><h4 class="code-header">fn <a href="#tymethod.has_class" class="fnname">has_class</a>(&amp;self, name: &amp;<a class="type" href="../../../values/type.AtomIdent.html" title="type style::values::AtomIdent">AtomIdent</a>, case_sensitivity: <a class="enum" href="../../../../selectors/attr/enum.CaseSensitivity.html" title="enum selectors::attr::CaseSensitivity">CaseSensitivity</a>) -&gt; <a class="primitive" href="../../../../std/primitive.bool.html">bool</a></h4></div></summary><div class="docblock"><p>Whether this snapshot contains the class <code>name</code>. Should only be called
if <code>has_attrs()</code> returns true.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.is_part" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../../../src/style/invalidation/element/element_wrapper.rs.html#64" title="goto source code">source</a></div><h4 class="code-header">fn <a href="#tymethod.is_part" class="fnname">is_part</a>(&amp;self, name: &amp;<a class="type" href="../../../values/type.AtomIdent.html" title="type style::values::AtomIdent">AtomIdent</a>) -&gt; <a class="primitive" href="../../../../std/primitive.bool.html">bool</a></h4></div></summary><div class="docblock"><p>Whether this snapshot represents the part named <code>name</code>. Should only be
called if <code>has_attrs()</code> returns true.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.imported_part" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../../../src/style/invalidation/element/element_wrapper.rs.html#67" title="goto source code">source</a></div><h4 class="code-header">fn <a href="#tymethod.imported_part" class="fnname">imported_part</a>(&amp;self, name: &amp;<a class="type" href="../../../values/type.AtomIdent.html" title="type style::values::AtomIdent">AtomIdent</a>) -&gt; <a class="enum" href="../../../../core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="type" href="../../../values/type.AtomIdent.html" title="type style::values::AtomIdent">AtomIdent</a>&gt;</h4></div></summary><div class="docblock"><p>See Element::imported_part.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.each_class" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../../../src/style/invalidation/element/element_wrapper.rs.html#71-73" title="goto source code">source</a></div><h4 class="code-header">fn <a href="#tymethod.each_class" class="fnname">each_class</a>&lt;F&gt;(&amp;self, _: F) <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="../../../../core/ops/function/trait.FnMut.html" title="trait core::ops::function::FnMut">FnMut</a>(&amp;<a class="type" href="../../../values/type.AtomIdent.html" title="type style::values::AtomIdent">AtomIdent</a>),&nbsp;</span></h4></div></summary><div class="docblock"><p>A callback that should be called for each class of the snapshot. Should
only be called if <code>has_attrs()</code> returns true.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.lang_attr" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../../../src/style/invalidation/element/element_wrapper.rs.html#76" title="goto source code">source</a></div><h4 class="code-header">fn <a href="#tymethod.lang_attr" class="fnname">lang_attr</a>(&amp;self) -&gt; <a class="enum" href="../../../../core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="type" href="../../../selector_parser/type.AttrValue.html" title="type style::selector_parser::AttrValue">AttrValue</a>&gt;</h4></div></summary><div class="docblock"><p>The <code>xml:lang=&quot;&quot;</code> or <code>lang=&quot;&quot;</code> attribute value per this snapshot.</p>
</div></details></div><h2 id="provided-methods" class="small-section-header">Provided methods<a href="#provided-methods" class="anchor"></a></h2><div class="methods"><details class="rustdoc-toggle" open><summary><div id="method.debug_list_attributes" class="method has-srclink"><div class="rightside"><a class="srclink" href="../../../../src/style/invalidation/element/element_wrapper.rs.html#50-52" title="goto source code">source</a></div><h4 class="code-header">fn <a href="#method.debug_list_attributes" class="fnname">debug_list_attributes</a>(&amp;self) -&gt; <a class="struct" href="../../../../alloc/string/struct.String.html" title="struct alloc::string::String">String</a></h4></div></summary><div class="docblock"><p>Gets the attribute information of the snapshot as a string.</p>
<p>Only for debugging purposes.</p>
</div></details></div><h2 id="implementors" class="small-section-header">Implementors<a href="#implementors" class="anchor"></a></h2><div class="item-list" id="implementors-list"><div id="impl-ElementSnapshot" class="impl has-srclink"><div class="rightside"><a class="srclink" href="../../../../src/style/servo/selector_parser.rs.html#683-730" title="goto source code">source</a></div><a href="#impl-ElementSnapshot" class="anchor"></a><h3 class="code-header in-band">impl <a class="trait" href="trait.ElementSnapshot.html" title="trait style::invalidation::element::element_wrapper::ElementSnapshot">ElementSnapshot</a> for <a class="struct" href="../../../servo/selector_parser/struct.ServoElementSnapshot.html" title="struct style::servo::selector_parser::ServoElementSnapshot">ServoElementSnapshot</a></h3></div></div><script type="text/javascript" src="../../../../implementors/style/invalidation/element/element_wrapper/trait.ElementSnapshot.js" async></script></section><section id="search" class="content hidden"></section></div></main><div id="rustdoc-vars" data-root-path="../../../../" data-current-crate="style" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.60.0-nightly (5e57faa78 2022-01-19)" ></div>
</body></html>