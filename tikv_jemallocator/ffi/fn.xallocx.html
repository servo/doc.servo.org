<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Resizes the previously-allocated memory region referenced by `ptr` in place to be at least `size` bytes, returning the real size of the allocation."><title>xallocx in tikv_jemallocator::ffi - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-dd39b87e5fcfba68.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="tikv_jemallocator" data-themes="" data-resource-suffix="" data-rustdoc-version="1.80.1 (3f5fd8dd4 2024-08-06)" data-channel="1.80.1" data-search-js="search-d52510db62a78183.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../static.files/storage-118b08c4c78b968e.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-20a3ad099b048cf2.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-df360f571f6edeae.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../tikv_jemallocator/index.html">tikv_jemallocator</a><span class="version">0.6.0</span></h2></div><div class="sidebar-elems"><h2><a href="index.html">In tikv_jemallocator::ffi</a></h2></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Function <a href="../index.html">tikv_jemallocator</a>::<wbr><a href="index.html">ffi</a>::<wbr><a class="fn" href="#">xallocx</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../../src/tikv_jemalloc_sys/lib.rs.html#348">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub unsafe extern &quot;C&quot; fn xallocx(
    ptr: <a class="primitive" href="https://doc.rust-lang.org/1.80.1/core/primitive.pointer.html">*mut </a><a class="enum" href="https://doc.rust-lang.org/1.80.1/core/ffi/enum.c_void.html" title="enum core::ffi::c_void">c_void</a>,
    size: <a class="primitive" href="https://doc.rust-lang.org/1.80.1/core/primitive.usize.html">usize</a>,
    extra: <a class="primitive" href="https://doc.rust-lang.org/1.80.1/core/primitive.usize.html">usize</a>,
    flags: <a class="primitive" href="https://doc.rust-lang.org/1.80.1/core/primitive.i32.html">i32</a>,
) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.80.1/core/primitive.usize.html">usize</a></code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Resizes the previously-allocated memory region referenced by <code>ptr</code> <em>in
place</em> to be at least <code>size</code> bytes, returning the real size of the
allocation.</p>
<p>Deallocates the old object pointed to by <code>ptr</code> and sets <code>ptr</code> to a new
object that has the size returned; the old a new objects share the same
base address. The contents of the new object are the same as that of the
old object prior to deallocation, up to the lesser of the new and old
sizes.</p>
<p>If <code>extra</code> is non-zero, an attempt is made to resize the allocation to
be at least <code>size + extra</code> bytes. Inability to allocate the <code>extra</code>
bytes will not by itself result in failure to resize.</p>
<p>The memory in the new object beyond the size of the old object is
obtained according to <code>flags</code> (it might be uninitialized).</p>
<h2 id="errors"><a class="doc-anchor" href="#errors">§</a>Errors</h2>
<p>If the allocation cannot be adequately grown in place up to <code>size</code>, the
size returned is smaller than <code>size</code>.</p>
<p>Note:</p>
<ul>
<li>the size value returned can be larger than the size requested during
allocation</li>
<li>when shrinking an allocation, use the size returned to determine
whether the allocation was shrunk sufficiently or not.</li>
</ul>
<h2 id="safety"><a class="doc-anchor" href="#safety">§</a>Safety</h2>
<p>The behavior is <em>undefined</em> if:</p>
<ul>
<li><code>size == 0</code>, or</li>
<li><code>size + extra &gt; size_t::max_value()</code>, or</li>
<li><code>ptr</code> does not match a pointer earlier returned by the memory
allocation functions of this crate, or</li>
<li>the memory region referenced by <code>ptr</code> has been deallocated.</li>
</ul>
</div></details></section></div></main></body></html>