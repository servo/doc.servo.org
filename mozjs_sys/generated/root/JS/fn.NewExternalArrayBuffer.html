<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Create a new ArrayBuffer with the given contents. The contents must not be modified by any other code, internal or external."><meta name="keywords" content="rust, rustlang, rust-lang, NewExternalArrayBuffer"><title>NewExternalArrayBuffer in mozjs_sys::generated::root::JS - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../../../../normalize.css"><link rel="stylesheet" type="text/css" href="../../../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../../../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../../../../dark.css" disabled><link rel="stylesheet" type="text/css" href="../../../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../../../storage.js"></script><script src="../../../../crates.js"></script><script defer src="../../../../main.js"></script>
    <noscript><link rel="stylesheet" href="../../../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../../../favicon.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../../../mozjs_sys/index.html"><div class="logo-container"><img class="rust-logo" src="../../../../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"></h2>
    </nav>
    <nav class="sidebar"><a class="sidebar-logo" href="../../../../mozjs_sys/index.html"><div class="logo-container"><img class="rust-logo" src="../../../../rust-logo.svg" alt="logo"></div>
        </a><div class="sidebar-elems"><h2 class="location">In <a href="../../../index.html">mozjs_sys</a>::<wbr><a href="../../index.html">generated</a>::<wbr><a href="../index.html">root</a>::<wbr><a href="index.html">JS</a></h2><div id="sidebar-vars" data-name="NewExternalArrayBuffer" data-ty="fn" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../../../../mozjs_sys/index.html"><img class="rust-logo" src="../../../../rust-logo.svg" alt="logo"></a><nav class="sub"><div class="theme-picker hidden"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../../../../brush.svg"></button><div id="theme-choices" role="menu"></div></div><form class="search-form"><div class="search-container"><div>
                                <input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../../../../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../../../../wheel.svg"></a></div></form></nav></div><section id="main-content" class="content"><div class="main-heading">
    <h1 class="fqn"><span class="in-band">Function <a href="../../../index.html">mozjs_sys</a>::<wbr><a href="../../index.html">generated</a>::<wbr><a href="../index.html">root</a>::<wbr><a href="index.html">JS</a>::<wbr><a class="fn" href="#">NewExternalArrayBuffer</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../../../../src/mozjs_sys/home/runner/work/servo/servo/target/debug/build/mozjs_sys-77898acd7db3002e/out/build/jsapi.rs.html#9" title="goto source code">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><div class="docblock item-decl"><pre class="rust fn"><code>pub unsafe extern &quot;C&quot; fn NewExternalArrayBuffer(<br>&nbsp;&nbsp;&nbsp;&nbsp;cx: <a class="primitive" href="../../../../std/primitive.pointer.html">*mut </a><a class="struct" href="../../../jsapi/struct.JSContext.html" title="struct mozjs_sys::jsapi::JSContext">JSContext</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;nbytes: <a class="primitive" href="../../../../std/primitive.usize.html">usize</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;contents: <a class="primitive" href="../../../../std/primitive.pointer.html">*mut </a><a class="enum" href="../../../../core/ffi/enum.c_void.html" title="enum core::ffi::c_void">c_void</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;freeFunc: <a class="type" href="../../../jsapi/JS/type.BufferContentsFreeFunc.html" title="type mozjs_sys::jsapi::JS::BufferContentsFreeFunc">BufferContentsFreeFunc</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;freeUserData: <a class="primitive" href="../../../../std/primitive.pointer.html">*mut </a><a class="enum" href="../../../../core/ffi/enum.c_void.html" title="enum core::ffi::c_void">c_void</a><br>) -&gt; <a class="primitive" href="../../../../std/primitive.pointer.html">*mut </a><a class="struct" href="../../../jsapi/struct.JSObject.html" title="struct mozjs_sys::jsapi::JSObject">JSObject</a></code></pre></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Create a new ArrayBuffer with the given contents. The contents must not be
modified by any other code, internal or external.</p>
<p>When the ArrayBuffer is ready to be disposed of, <code>freeFunc(contents, freeUserData)</code> will be called to release the ArrayBuffer’s reference on the
contents.</p>
<p><code>freeFunc()</code> must not call any JSAPI functions that could cause a garbage
collection.</p>
<p>The caller must keep the buffer alive until <code>freeFunc()</code> is called, or, if
<code>freeFunc</code> is null, until the JSRuntime is destroyed.</p>
<p>The caller must not access the buffer on other threads. The JS engine will
not allow the buffer to be transferred to other threads. If you try to
transfer an external ArrayBuffer to another thread, the data is copied to a
new malloc buffer. <code>freeFunc()</code> must be threadsafe, and may be called from
any thread.</p>
<p>This allows ArrayBuffers to be used with embedder objects that use reference
counting, for example. In that case the caller is responsible
for incrementing the reference count before passing the contents to this
function. This also allows using non-reference-counted contents that must be
freed with some function other than free().</p>
</div></details></section><section id="search" class="content hidden"></section></div></main><div id="rustdoc-vars" data-root-path="../../../../" data-current-crate="mozjs_sys" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.60.0-nightly (5e57faa78 2022-01-19)" ></div>
</body></html>